<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        .map-responsive {
            overflow: hidden;
            padding-bottom: 56.25%;
            position: relative;
            height: 0;
        }
        
        .map-responsive iframe {
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            position: absolute;
        }
    </style>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Leads Chain</title>
    <meta content="LeaChain Dashboard" name="description" />
    <meta content="Degital Innovation" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="shortcut icon" href="../app/forntend/images/Logomakr_0fG6JV.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,700" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../app/forntend/css/mobirise.css" />
    <link rel="stylesheet" href="../app/forntend/css/magnific-popup.css">
    <link rel="stylesheet" type="text/css" href="../app/forntend/css/materialdesignicons.min.css" />
    <link href="../app/forntend/css/bootstrap.min.css" rel="stylesheet">
    <link href="../app/forntend/css/style.css" rel="stylesheet">
</head>

<body data-spy="scroll" data-target="#data-scroll">
    <header class="navbar navbar-inverse navbar-toggleable-md fixed-top sticky navbar-custom">
        <div class="container">
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#data-scroll" aria-controls="data-scroll" aria-expanded="false" aria-label="Toggle navigation">
                <i class="mdi mdi-menu"></i>
            </button>
            <a class="navbar-brand logo" href="index.html">
                <span class="logo-text"><img src="../app/assets/images/logo.png" alt="" height="30"></span>
            </a>
            <div class="collapse navbar-collapse justify-content-end" id="data-scroll">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link active">Home</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    <section class="section home" id="home">
        <div class="bg-overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-8 offset-md-2 text-white text-center">
                    <h1 class="home-title">A Platform for Issuing & Verifying Digital Certificates Using BlockChain.</h1>
                    <p class="mt-4 home-subtitle">
                        Create and send certificates in minutes, verify in seconds! Saving your time, saving your money, increasing social sharing. Secured with Blockchain Technology.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <section class="section" id="features">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="card m-b-20">
                        <div class="card-block">
                            <h4 class="mt-0 header-title">QR Code Scan Info</h4>
                            <table class="table table-responsive">
                                <tbody>
                                    <tr>
                                        <td>Institue Name</td>
                                        <td id="insTd"></td>
                                    </tr>
                                    <tr>
                                        <td>Subject Name</td>
                                        <td id="subTd"></td>
                                    </tr>
                                    <tr>
                                        <td>Student Name</td>
                                        <td id="stuTd"></td>
                                    </tr>
                                    <tr>
                                        <td>Regestration No</td>
                                        <td id="regNoTd"></td>
                                    </tr>
                                    <tr>
                                        <td>Semester</td>
                                        <td id="semTd"></td>
                                    </tr>
                                    <tr>
                                        <td>Issue Date</td>
                                        <td id="issueTd"></td>
                                    </tr>
                                    <tr>
                                        <td>Transaction Hash</td>
                                        <td id="txTd">
                                            <a id="txHashLink" href=""></a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-12">
                    <div class="text-center">
                        <h3>Verify Here</h3>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="text-center">
                        <br /><br />
                        <div><button class="btn btn-outline-info w-md waves-effect waves-light" id="verifyButton">Verify</button>
                        </div>
                        <br/><br/>
                        <div id="verifyIconSuccess">
                            <h3 class="mdi mdi-verified text-success">Verified</h3>
                        </div>
                        <div id="verifyIconFail">
                            <h3 class="mdi mdi-close-circle-outline text-danger">Not Verified</h3>
                        </div>
                        <br/><br/>
                        <div id="one">
                            <p>Computing Hash Code of local certificate. <i id="iconOne" class="mdi mdi-check-circle-outline"></i></p>
                        </div>
                        <div id="two">
                            <p>Fetching hash in OP_RETURN field form ethereum Blockchain. <i id="iconTwo" class="mdi mdi-check-circle-outline"></i></p>
                        </div>
                        <div id="three">
                            <p>Comparing local and blockchain hashes. <i id="iconThree" class="mdi mdi-check-circle-outline"></i></p>
                        </div>
                        <div id="four">
                            <p>Checking LEADS<i class="mdi mdi-link-variant"></i>chain signature. <i id="iconFour" class="mdi mdi-check-circle-outline"></i></p>
                        </div>
                        <div id="five">
                            <p>Checking not revoked by issuer. <i id="iconFive" class="mdi mdi-check-circle-outline"></i></p>
                        </div>
                        <div id="six">
                            <h3 class="text-success">Success! The certificate has been verified. <i id="iconSix" class="mdi mdi-check-circle-outline"></i></p>
                        </div>
                        <p style="overflow: auto">Blockchain Address:
                            <a href="" id="blockAddress"></a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>
    <section class="section" id="contact">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="text-center">
                        <h3>Get In Touch</h3>
                        <a href="http://leads.com.bd/leads-corporation-limited" class="text-gray">
                            <i class="mbri-map-pin"></i> Rupayan Trade Center 16th (Space-1) & 17th Floor, 114, Kazi Nazrul Islam Avenue, Bangla Motors, Dhaka 1000. (At Bangla Motor Roundabout).
                        </a>
                    </div>
                </div>
            </div>
            <div class="section bg-grey text-center">
                <div class="map-responsive">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3652.0421219520085!2d90.39352157027609!3d23.745877292740573!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3755b859c7357339%3A0x5f6536cf444d06a7!2sLEADS+Corporation+Limited!5e0!3m2!1sen!2s!4v1508661766208"
                        width="1000" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
                </div>
            </div>
            <br />
            <form class="">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="username">Name</label>
                            <input type="text" class="form-control" id="username" required />
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="useremail">Email address</label>
                            <input type="email" class="form-control" id="useremail" required />
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="subject">Subject</label>
                            <input type="text" class="form-control" id="subject" required />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea class="form-control" rows="5" id="message"></textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 text-right">
                        <button type="submit" class="btn btn-custom">Send Message</button>
                    </div>
                </div>
            </form>
        </div>
    </section>
    <footer class="footer bg-dark">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="float-md-right">
                        <ul class="list-inline social">
                            <li class="list-inline-item">
                                <a href="#">
                                    <i class="mdi mdi-linkedin"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">
                                    <i class="mdi mdi-google"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">
                                    <i class="mdi mdi-facebook"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="float-md-left">
                        <p class="copy-rights">2017 ©
                            <a href="#"><img src="../app/assets/images/logo.png" alt="" height="22"></a> . All Rights Reserved</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="../app/forntend/js/jquery-2.1.4.min.js"></script>
    <script src="../app/forntend/js/tether.min.js"></script>
    <script src="../app/forntend/js/bootstrap.min.js"></script>
    <script src="../app/forntend/js/jquery.sticky.js"></script>
    <script type="text/javascript" src="../app/forntend/js/jquery.easing.1.3.min.js"></script>
    <script type="text/javascript" src="../app/forntend/js/jquery.magnific-popup.min.js"></script>
    <script src="../app/forntend/js/jquery.app.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#verifyIconSuccess").hide();
            $("#verifyIconFail").hide();
            $("#one").hide();
            $("#two").hide();
            $("#three").hide();
            $("#four").hide();
            $("#five").hide();
            $("#six").hide();
            $("#iconOne").hide();
            $("#iconTwo").hide();
            $("#iconThree").hide();
            $("#iconFour").hide();
            $("#iconFive").hide();
            $("#iconSix").hide();
            $("#verifyIconFail").hide();
            $("#verifyButton").click(function() {
                $.ajax({
                    url: 'http://115.127.24.181:59311/api/Students?txHash=' + txHash,
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + sessionStorage.getItem('accessToken')
                    },
                    dataType: 'json',
                    success: function(response) {
                        console.log(response);
                        $("#one").fadeIn(1237, function() {
                            $("#iconOne").fadeIn(300);
                            $("#two").fadeIn(1152, function() {
                                $("#iconTwo").fadeIn(350);
                                $("#three").fadeIn(1346, function() {
                                    $("#iconThree").fadeIn(323);
                                    $("#four").fadeIn(1390, function() {
                                        $("#iconFour").fadeIn(312);
                                        $("#five").fadeIn(1058, function() {
                                            $("#iconFive").fadeIn(320);
                                            $("#six").fadeIn(1817, function() {
                                                $("#iconSix").fadeIn(300);
                                                $("#verifyIconSuccess").show();
                                            });
                                        });
                                    });
                                });
                            });
                        });
                    },
                    error: function(response) {
                        console.log(response);
                        $("#verifyIconFail").show();
                    }
                });
            });

            var getUrlParameter = function getUrlParameter(sParam) {
                var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                    sURLVariables = sPageURL.split('?'),
                    sParameterName,
                    i;

                for (i = 0; i < sURLVariables.length; i++) {
                    sParameterName = sURLVariables[i].split('=');

                    if (sParameterName[0] === sParam) {
                        return sParameterName[1] === undefined ? true : sParameterName[1];
                    }
                }
            };

            var txHash = getUrlParameter('txHash');
            console.log(txHash);

            $(window).load(function() {
                $.ajax({
                    url: 'http://115.127.24.181:59311/api/Students?txHash=' + txHash,
                    method: 'GET',
                    dataType: 'json',
                    success: function(response) {
                        console.log(response);
                        $("#insTd").text(response.InstitueName);
                        $("#subTd").text(response.SubjectName);
                        var data = response.Name;
                        var arr = data.split(',');
                        $("#stuTd").text(arr[0]);
                        var str = arr[1];
                        var res = str.slice(0, 8);
                        var res2 = str.slice(8, 20);
                        console.log(res);
                        console.log(res2);
                        $("#regNoTd").text(res2);
                        $("#semTd").text(response.Semester);
                        $("#issueTd").text(response.IssueDate);
                        var txHash = response.TransactionHash;
                        $("#txHashLink").attr('href', 'https://ropsten.etherscan.io/tx/' + txHash);
                        $("#txHashLink").text(txHash);
                        $("#blockAddress").attr('href', 'https://ropsten.etherscan.io/tx/' + txHash);
                        $("#blockAddress").text(txHash);
                    },
                    error: function(response) {
                        console.log(response);
                        alert("There is Something Wrong");
                    }
                });
            });
        });
    </script>
</body>

</html>